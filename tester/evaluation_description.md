
# How we run the `WADIFF`
1. Get the command to execute

   Use the follow command to generate the coammand to run the `WADIFF`:

   ```shell
   python script_evaluation_runner.py WADIFF <testing_time> <result_identifier> <result_base_dir> <WADIFF_SE_TC_dir>
   ```
   Explanation of the arguments : 
   - `<testing_time>` : Test time (seconds)
   - `<result_identifier>`: A unique string used to create a distinct directory for storing the test results (e.g., `01`, `02`).
   - `<result_base_dir>` : The path to an existing directory that will serve as the parent directory for the unique directory created to store the test results.
   - `<WADIFF_SE_TC_dir>` :  The path to the directory containing the test cases generated by the symbolic execution engine of `WADIFF`.


   **Example**

   ```shell
   python script_evaluation_runner.py WADIFF  86400  02 /media/hdd8T1/CurBaselines /home/anonymous/CP912/v19_tcs_from_cloud
   ```

   **Explanation of the example**

   It will take the `.wasm` files (`generated by WADIFF`) located in `/home/anonymous/CP912/v19_tcs_from_cloud` as input, perform testing for `86400` seconds, and save the test results in a directory named with the identifier `02` under `/media/hdd8T1/CurBaselines`.

2. Execute the command generated by the last step. 


# How we run the `Wasm-Smith`

1. Use Wasm-Smith to generate test cases 

   We use the script `script_prepare_smith_case_in_one.py` to collect the test cases
   generated bt `Wasm-Smith`. Specifically, it 
   
   1. Generate test cases.
   2. Filter out the test cases without a function.
   3. Insert a function with the specific name (i.e., `to_test`) as the entry to enable the differential testing engine to execute them.
   
   Use the follow command to get the command for preparing test cases.
   ```shell
   python script_prepare_smith_case_in_one.py <mode> <raw_case_sub_dir_id> <raw_case_num> <pre_seed_base_dir> <rewrited_case_sub_dir_id> <exception_case_sub_dir_id>
   ```
   where

    - `<mode>` : Each mode corresponds to a specific way to generate the raw cases. They are defined in the `mode_name2func` dictionary in the script `script_prepare_wasm_smith.py`. In the evaluation, we use the mode `a_default_simplest`, conresponding to the default configuration of `Wasm-Smith`.
    - `<raw_case_sub_dir_id>` : The identifier of the sub directory to store the raw cases. The raw cases will be stored in the path: `pre_seed_base_dir/<mode>_<raw_case_sub_dir_id>`.
    - `<raw_case_num>` : The number of raw cases to generate.
    - `<pre_seed_base_dir>` : The base directory to store the generated cases.
    - `<rewrited_case_sub_dir_id>` : The identifier of the sub directory to store the rewritten cases. The rewritten cases will be stored in the path: `pre_seed_base_dir/<mode>_<rewrited_case_sub_dir_id>`.
    - `<exception_case_sub_dir_id>` : The identifier of the sub directory to store the exception cases. The exception cases will be stored in the path: `pre_seed_base_dir/<mode>_<exception_case_sub_dir_id>`.

   Example:
   ```shell
   python script_prepare_smith_case_in_one.py a_default_simplest raw_batch1 500000 /media/hdd8T1/inv_wasm_smith/pre_seed  rewrite exception
   ```
    Then, execute the command generated by the above command.

2. Get the command to execute
   
   Use the follow command to generate the coammand to run the `Wasm-Smith`:

   ```shell
   python script_evaluation_runner.py WasmSmith <testing_time> <result_identifier> <result_base_dir> <input_dir>
   ```
   Explanation of the arguments : 
   - `<testing_time>` : Test time (seconds)
   - `<result_identifier>`: A unique string used to create a distinct directory for storing the test results (e.g., `01`, `02`).
   - `<result_base_dir>` : The path to an existing directory that will serve as the parent directory for the unique directory created to store the test results.
   - `<input_dir>` :  The path to the directory containing the rewritten test cases generated by the last step.

3. Execute the command generated in the step 2.




# How we run the ablation baselines and `LWDIFF`


1. Get the command to execute

   Use the follow command to generate the coammand to conduct the testing:

   ```shell
   python script_evaluation_runner.py <tester_name> <testing_time> <result_identifier> <result_base_dir> <add_random> <seed_dir>
   ```
   Explanation of the arguments : 
   - `<tester_name>` : The name of the tester, it can be  `RM` / `RS` / `RP` / `Our`
   - `<testing_time>` : Test time (seconds)
   - `<result_identifier>`: A unique string used to create a distinct directory for storing the test results (e.g., `01`, `02`).
   - `<result_base_dir>` : The path to an existing directory that will serve as the parent directory for the unique directory created to store the test results.
   - `<add_random>` :  `False` or `True`, representing whether add a random mutation operator. We use `False` in the evaluation.
   - `<seed_dir>` : The directory containing the seeds.


   **Example**

   ```shell
   python script_evaluation_runner.py Our  86400  02 /media/hdd8T1/CurBaselines False ./only_nop
   ```



2. Execute the command generated by the last step.


